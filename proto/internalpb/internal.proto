syntax = "proto3";

option go_package = "gokv/proto/internalpb;internalpb";

import "commonpb/common.proto";

package internalpb;

service InternalServer {
  rpc Heartbeat(HeartbeatRequest) returns (HeartbeatResponse);
  rpc ForwardCommand(commonpb.CommandRequest) returns (commonpb.CommandResponse);
  rpc Rebalance(stream RebalanceRequest) returns (RebalanceResponse);
}

message HeartbeatRequest {
  repeated commonpb.Node peers = 1;
}

message HeartbeatResponse {
  repeated commonpb.Node peers = 1;
}

message RebalanceRequest {
  repeated commonpb.CommandRequest commands = 1;
}

message RebalanceResponse {
  bool success = 1;
}
